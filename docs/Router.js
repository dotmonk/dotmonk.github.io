import n from"./_snowpack/pkg/react.js";export const RouterContext=n.createContext({});export class Router extends n.Component{constructor(t){super(t);this.updateFunction=this.updateFunction.bind(this),this.state=this.parseStateLocation()}componentDidMount(){window.addEventListener("popstate",this.updateFunction),window.addEventListener("pushstate",this.updateFunction)}parseStateLocation(){const t=location.hash?location.hash.substring(1):"",s=t.indexOf("?")>=0?Object.fromEntries(new URLSearchParams(t.split("?")[1]).entries()):{};return{hashPath:t.indexOf("?")>=0?t.split("?")[0]:t,hashParams:s}}updateFunction(){this.setState(this.parseStateLocation())}componentWillUnmount(){window.removeEventListener("popstate",this.updateFunction),window.removeEventListener("pushstate",this.updateFunction)}render(){const{children:t}=this.props;return n.createElement(RouterContext.Provider,{value:this.state},t)}}export const pushPathname=e=>{history.pushState(void 0,document.title,e);const t=document.createEvent("HTMLEvents");t.initEvent("pushstate",!0,!0),window.dispatchEvent(t)},pushHash=e=>{history.pushState(void 0,document.title,`${window.location.pathname}#${e}`);const t=document.createEvent("HTMLEvents");t.initEvent("pushstate",!0,!0),window.dispatchEvent(t)};class a extends n.Component{render(){const{hashRegex:t,pathnameRegex:s,children:o}=this.props,i=this.context,r=s&&location.pathname.match(s),c=t&&(location.hash?location.hash.substring(1).match(t):"".match(t));return!r&&!c?null:n.createElement(RouterContext.Provider,{value:i},o)}}a.contextType=RouterContext;export default a;
