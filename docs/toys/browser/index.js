import React,{Component}from"../../_snowpack/pkg/react.js";import Route from"../../Router.js";const disabledAccessorPaths=["alert","close","confirm","document.location.assign","document.location.reload","document.location.replace","history.replaceState","history.pushState","history.forward","history.back","history.go","location.assign","location.reload","location.replace","open","prompt","print"];class BrowserStudio extends Component{constructor(e){super(e);this.state={}}generateArgumentsResultMap(accessorPath){const resultMap={},workingIdeaArguments=["()",'("")',"(0)","(1)","(null)","(undefined)","(true)","(false)","([])","([1])"];for(const args of workingIdeaArguments)try{const result=eval(`${accessorPath}${args};`);resultMap[args]=result}catch(e){}return resultMap}objectToMap(e,o=0,r=""){let s=Object.keys(e);if(o>20)return;if(s.length===0){const t=Object.getPrototypeOf(e);if(["[object OfflineResourceList]","[object Storage]"].includes(String(t)))return;s=Object.keys(t)}if(s.length===0)return;const c={};for(const t of s){if(t.length>3&&r.indexOf(`.${t}`)>=0)continue;let l=e===e[t]?"self":typeof e[t];const u=String(e[t]);c[r?`${r}.${t}`:t]={type:l,preview:u};const i=r?`${r}.${t}`:t;if(l==="object"&&e[t]!==null){const a=this.objectToMap(e[t],o+1,r?`${r}.${t}`:t);Object.keys(a||{}).forEach(n=>{c[n]=(a||{})[n]})}else if(l==="function"&&!disabledAccessorPaths.includes(i)){const a=this.generateArgumentsResultMap(i);for(const n in a)c[r?`${r}.${t}${n}`:`${t}${n}`]={type:"execution",preview:String(a[n])}}}return c}componentDidMount(){this.setState({data:this.objectToMap(window)})}generateTable(e){return e?React.createElement("table",{id:"report",style:{border:"solid 1px var(--nyx-color-text)"}},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"attribute"),React.createElement("th",null,"typeof(attribute)"),React.createElement("th",null,"preview"))),React.createElement("tbody",null,Object.keys(e).sort().map((o,r)=>React.createElement("tr",{key:r},React.createElement("td",{style:{borderTop:"solid 1px var(--nyx-color-text)"}},o),React.createElement("td",{style:{borderTop:"solid 1px var(--nyx-color-text)"}},e[o].type),React.createElement("td",{style:{borderTop:"solid 1px var(--nyx-color-text)"}},e[o].preview))))):null}render(){const{data:e}=this.state;return React.createElement(Route,{hashRegex:/^\/Toys\/Browser/},React.createElement("div",null,React.createElement("h4",null,"Reported data"),this.generateTable(e)))}}export default BrowserStudio;
