import r,{Component as u}from"../../_snowpack/pkg/react.js";import p from"../../Router.js";class y extends u{constructor(e){super(e);this.state={}}objectToMap(e,n=0,o=""){let l=Object.keys(e);if(n>20)return;if(l.length===0){const t=Object.getPrototypeOf(e);if(["[object OfflineResourceList]","[object Storage]"].includes(String(t)))return;l=Object.keys(t)}if(l.length===0)return;const s={};for(const t of l){if(t.length>3&&o.indexOf(`.${t}`)>=0)continue;let a=e===e[t]?"self":typeof e[t];const d=String(e[t]),c=a==="object"&&e[t]!==null?this.objectToMap(e[t],n+1,o?`${o}.${t}`:t):void 0;s[o?`${o}.${t}`:t]={type:a,preview:d},Object.keys(c||{}).forEach(i=>{s[i]=(c||{})[i]})}return s}componentDidMount(){this.setState({data:this.objectToMap(window)})}generateTable(e){return e?r.createElement("table",{id:"report",style:{border:"solid 1px var(--nyx-color-text)"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"attribute"),r.createElement("th",null,"typeof(attribute)"),r.createElement("th",null,"preview"))),r.createElement("tbody",null,Object.keys(e).sort().map((n,o)=>r.createElement("tr",{key:o},r.createElement("td",{style:{borderTop:"solid 1px var(--nyx-color-text)"}},n),r.createElement("td",{style:{borderTop:"solid 1px var(--nyx-color-text)"}},e[n].type),r.createElement("td",{style:{borderTop:"solid 1px var(--nyx-color-text)"}},e[n].preview))))):null}render(){const{data:e}=this.state;return r.createElement(p,{hashRegex:/^\/Toys\/Browser/},r.createElement("div",null,r.createElement("h4",null,"Reported data"),this.generateTable(e)))}}export default y;
